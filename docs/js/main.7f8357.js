(()=>{"use strict";function t(t,e){const n=document.getElementById("mail-editor");n.innerHTML="",t.forEach((t=>{let l=t.content;Object.keys(t.variables).forEach((e=>{const n=new RegExp(`{{${e}}}`,"g");l=l.replace(n,t.variables[e])}));const i=document.createElement("div");i.classList.add("block"),i.innerHTML=l,i.addEventListener("click",(n=>{document.querySelectorAll(".block").forEach((t=>t.classList.remove("_active"))),i.classList.add("_active"),e(t.id),n.stopPropagation()})),n.appendChild(i)})),n.addEventListener("click",(t=>{t.target.classList.contains("block")||document.querySelectorAll(".block").forEach((t=>t.classList.remove("_active")))}))}function e(t,e,n,l){const i=document.getElementById("options-panel");if(i.innerHTML="",!t)return void(i.innerHTML="<p>Выберите блок для редактирования</p>");const a={preheader:"Прехеадер",styles:"Стили",template_width:"Ширина шаблона (в пикселях)",background_url:"URL фонового изображения",logo_spacer:"Отступ для логотипа (в пикселях)",logo_link:"Ссылка на логотип",logo_url:"URL логотипа",logo_width:"Ширина логотипа (в пикселях)",title_width:"Ширина заголовка (в пикселях)",title_fz:"Размер шрифта заголовка (в пикселях)",title_fw:"Вес шрифта заголовка",title_lh:"Высота строки заголовка",title_ls:"Межбуквенное расстояние заголовка",title_color:"Цвет заголовка",title_area:"Текст заголовка",image_spacer:"Отступ для изображения (в пикселях)",image_link:"Ссылка для изображения"};Object.keys(t.variables).forEach((t=>{(t=>{const n=a[t]||"Значение",l=document.createElement("label");l.innerText=n;const o=document.createElement("input");o.type=(t=>{const e=t.split("_"),n=e[1]||e[0];return["preheader","styles","url","link","color","area","lh","ls"].includes(n)?"text":"number"})(t),o.placeholder=n,o.addEventListener("input",(n=>{e(t,n.target.value)})),i.append(l,o)})(t)}));const o=(t,e,n)=>{const l=document.createElement("button");return l.innerText=t,l.classList.add(e),l.addEventListener("click",n),l},r=document.createElement("div");r.className="options-buttons",r.append(o("Копировать блок","copy-button",(()=>l(t))),o("Удалить блок","delete-button",(()=>n(t.id)))),i.appendChild(r)}const n="https://image.sendsay.ru/image/setpartnerstv/",l=[{name:"Прехеадер",content:'<div style="text-align:center;font-size:16px;">\n\t\t{{preheader}}\n\t\t&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;&#10240;\n\t</div>'},{name:"styles",content:' <style type="text/css">\n    body, table, td, a {\n      text-size-adjust: 100%;\n      -webkit-text-size-adjust: 100%;\n      -ms-text-size-adjust: 100%;\n    }\n    img {\n\t\t  width:100%;\n      border: 0;\n      outline: none;\n      text-decoration: none;\n      -ms-interpolation-mode: bicubic; /* Ensure smooth image scaling in Outlook */\n    }\n    body {\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      height: 100%;\n      line-height: 100%;\n\t\t\tfont-family: Arial, sans-serif;\n    }\n    a {\n      color: inherit;\n      text-decoration: none;\n    }\n\n\t\tp{\n\t\tmargin:0;\n\t\t}\n\n    /* Mobile Styles */\n   \n      {{styles}}\n  \n  </style>'},{name:"header_tematic",content:`<table border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width: {{template_width}}px; margin: 0 auto; border-collapse: collapse;">\n    <tr>\n        <td align="center" valign="top" style="text-align: center; border-radius: 0 0 15px 15px;">\n            \x3c!-- Background Image Section --\x3e\n            <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse: collapse; border-radius: 0 0 15px 15px;">\n                <tr>\n                    <td align="center" valign="top" background="${n}{{background_url}}.png" style="background-size: cover; background-position: center center; background-repeat: no-repeat; text-align: center; padding: 30px 10px 0 10px; border-radius: 0 0 15px 15px;">\n                        \x3c!-- Logo Section --\x3e\n                        <table class="logo" role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse: collapse;">\n                            <tr>\n                                <td align="center" style="padding-bottom: {{logo_spacer}}px;">\n                                    <a href="{{logo_link}}" target="_blank" style="text-align: center; display: block;height:auto;">\n                                        <img src="${n}{{logo_url}}.png" style="max-width: {{logo_width}}px; margin: 0 auto; display: block; border: 0;" alt="газпром бонус">\n                                    </a>\n                                </td>\n                            </tr>\n                        </table>\n\n                        \x3c!-- Text Section --\x3e\n                        <table class="main_title" role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse: collapse; max-width: {{title_width}}px; margin: 0 auto;">\n                            <tr>\n                                <td align="center" style="font-size: {{title_fz}}px; font-weight: {{title_fw}}; line-height: {{title_lh}}; letter-spacing: {{title_ls}}; color: {{title_color}}; text-align: center;">\n                                    {{title_area}}\n                                </td>\n                            </tr>\n                        </table>\n\n                        \x3c!-- Spacer --\x3e\n                        <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse: collapse;">\n                            <tr>\n                                <td height="{{image_spacer}}" style="line-height:{{image_spacer}};font-size: 0; line-height: 0;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <a href="{{image_link}}" target="_blank" width="100%" style="display:block;width:100%;height:100%;"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>`}];let i=[];function a(t){t.id="_"+Math.random().toString(36).substr(2,9),i.push(t)}let o=null;function r(t){o=t,e(i.find((t=>t.id===o)),d,c,s)}function c(n){!function(t){i=i.filter((e=>e.id!==t))}(n),o=null,t(i,r),e(null,d,c,s)}function s(e){a({...e,id:"_"+Math.random().toString(36).substr(2,9),variables:JSON.parse(JSON.stringify(e.variables))}),t(i,r)}function d(e,n){const l=i.find((t=>t.id===o));var a,c;l&&(l.variables[e]=n,a=o,c=l,i=i.map((t=>t.id===a?c:t)),t(i,r))}!function(){const t=document.getElementById("app"),e=document.createElement("div");e.id="nav-panel",e.classList.add("nav-panel");const n=document.createElement("div");n.id="mail-editor",n.classList.add("mail-editor");const l=document.createElement("div");l.id="options-panel",l.classList.add("options-panel"),t.append(e,n,l)}(),function(t,e){const n=document.getElementById("nav-panel");n.innerHTML="",t.forEach((t=>{const l=document.createElement("button");l.textContent=`${t.name}`,l.addEventListener("click",(()=>{e(t)})),n.appendChild(l)}))}(l,(function(e){const n=function(t){const e=/{{(.*?)}}/g,n=[];let l;for(;null!==(l=e.exec(t));)n.push(l[1]);return n}(e.content);a({...e,variables:n.reduce(((t,e)=>(t[e]=`${e}`,t)),{})}),t(i,r)})),t(i,r),e(null,d,c,s)})();